---
title: "Preliminary Model Analysis"
author: "MAMBA OUT"
output: pdf_document
geometry: margin=0.5in
---

## Introduction

A preliminary linear regression model was fitted using `Price` as the response variable, with five predictors: `Bedroom2`, `Bathroom`, `Distance`, `Landsize`, and `Type`. The model aimed to determine significant factors influencing housing prices in Melbourne.


```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Load necessary library
library(ggplot2)

# Load the dataset and remove rows with missing values
melb_data <- read.csv("/Users/clearsky21/Housing_Price_Analysis/data/01-raw_data/melb_data.csv")
melb_data_clean <- na.omit(melb_data)

# Fit the linear regression model using the cleaned dataset
model <- lm(Price ~ Bedroom2 + Bathroom + Distance + Landsize + Type, data = melb_data_clean)
```

## Residual Analysis and Diagnostic Plots
```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Extract residuals and fitted values from the model
y_value <- resid(model)
x_value <- fitted(model)

# Arrange multiple plots in a grid for better readability
par(mfrow = c(2, 3))

# Plot Residuals vs Fitted Values
plot(x = x_value, y = y_value, main = "Residual vs Fitted", xlab = "Fitted", ylab = "Residuals")

# Residual plots for each numeric predictor using the cleaned dataset
plot(x = melb_data_clean$Bedroom2, y = y_value, main = "Residual vs Bedroom2",
     xlab = "Bedroom2", ylab = "Residual")

plot(x = melb_data_clean$Bathroom, y = y_value, main = "Residual vs Bathroom",
     xlab = "Bathroom", ylab = "Residual")

plot(x = melb_data_clean$Distance, y = y_value, main = "Residual vs Distance",
     xlab = "Distance", ylab = "Residual")

plot(x = melb_data_clean$Landsize, y = y_value, main = "Residual vs Landsize",
     xlab = "Landsize", ylab = "Residual")

# Residual plot for the categorical predictor "Type" using boxplot
boxplot(y_value ~ melb_data_clean$Type,
        main = "Residuals vs Type",
        xlab = "Type",
        ylab = "Residuals",
        col = "lightblue")
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Set plotting back to single plot layout
par(mfrow = c(1, 2))

# Q-Q plot to assess normality of residuals
qqnorm(y_value, main = "Normal Q-Q Plot")
qqline(y_value)

# Plotting the Response vs Fitted values to check additional condition
plot(x = x_value, y = melb_data_clean$Price, main = "Response vs Fitted",
     xlab = "Fitted Values", ylab = "Price")
abline(a = 0, b = 1, lty = 2, col = "red")
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Pairwise scatter plot for numeric predictors
pairs(melb_data_clean[, c("Bedroom2", "Bathroom", "Distance", "Landsize")],
      main = "Pairwise Plots of Predictors",
      col = "lightblue")
```

#### Assumption Checks and Residual Analysis

1. **Linearity**: The **Residual vs Fitted** plot shows a noticeable pattern rather than random scatter. Residuals fan out at higher fitted values, indicating that the model does not fully capture the linear relationship between predictors and response.

2. **Homoscedasticity**: The residual spread in the **Residual vs Fitted** plot suggests heteroscedasticity, where variance increases with fitted values. This "funnel" shape indicates that residuals are not evenly distributed, violating the assumption of constant variance.

3. **Normality of Residuals**: The **Q-Q plot** deviates significantly from the diagonal line, especially in the tails. This implies non-normal distribution of residuals, particularly for extreme values, which affects the validity of statistical inferences.

4. **Multicollinearity**: The **pairwise scatter plots** among predictors, especially between `Bedroom2` and `Bathroom`, indicate clustering and suggest strong correlations. This could lead to multicollinearity, making coefficients less reliable.

#### Comparison with Literature

In the literature, predictors like `Bathroom` and `Landsize` are often significant in explaining house prices, typically yielding strong model fits. However, the current model shows deviations from linear regression assumptions, indicating that the Melbourne housing data may need more complexity to capture these relationships properly. Unlike typical results, residual plots indicate underfitting and issues like non-linearity and heteroscedasticity.

#### Conclusion

The residual plots indicate that several assumptions of linear regression are violated, suggesting the model is not sufficiently capturing the complexity of housing price predictors. Improvements such as variable transformation, adding interaction terms, or using a non-linear model may be necessary to achieve a better fit.


